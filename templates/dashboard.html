<!-- <!DOCTYPE html>
<html>
<head>
    <title>Client Dashboard</title>
    <style>
        body { background:#121212; color:#fff; font-family:Arial; }
        table { width:100%; border-collapse:collapse; margin-top:10px; }
        th, td { padding:8px; border:1px solid #444; }
        th { background:#222; }
        input { padding:6px; margin-bottom:10px; width:300px; }
        button { padding:6px 10px; margin:5px; cursor:pointer; }
        a { color:#4fc3f7; }
        #modal {
            display:none; position:fixed; top:0; left:0; right:0; bottom:0;
            background:rgba(0,0,0,.7); justify-content:center; align-items:center;
        }
        #box {
            background:#1e1e1e; padding:20px; width:600px; max-height:80%;
            overflow:auto; border-radius:8px;
        }
    </style>
</head>
<body>
<h2>ðŸ–¥ Client Dashboard</h2>

<input id="search" placeholder="Search by UUID / Hostname / MAC" onkeyup="loadClients()" />
<button onclick="window.location='/export/csv'">â¬‡ Export CSV</button>

<table>
<thead>
<tr>
<th>UUID</th><th>MAC</th><th>Hostname</th><th>Last Seen</th><th>Status</th><th>View</th><th>PDF</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<div id="modal" onclick="closeModal()">
  <div id="box" onclick="event.stopPropagation()">
    <h3>Client Details</h3>
    <pre id="details"></pre>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<script>
async function loadClients() {
    const q = document.getElementById("search").value;
    const res = await fetch(`/api/clients?search=${q}`);
    const data = await res.json();

    let html = "";
    data.forEach(c => {
        html += `<tr>
        <td>${c.uuid}</td>
        <td>${c.mac}</td>
        <td>${c.hostname}</td>
        <td>${c.last_seen}</td>
        <td>${c.status}</td>
        <td><button onclick="viewClient('${c.uuid}')">View</button></td>
        <td><a href="/export/pdf/${c.uuid}">PDF</a></td>
        </tr>`;
    });

    document.getElementById("rows").innerHTML = html;
}

async function viewClient(uuid) {
    const res = await fetch(`/api/client/${uuid}`);
    const data = await res.json();
    document.getElementById("details").textContent =
        JSON.stringify(data, null, 2);
    document.getElementById("modal").style.display = "flex";
}

function closeModal() {
    document.getElementById("modal").style.display = "none";
}

loadClients();
setInterval(loadClients, 5000);
</script>
</body>
</html> -->
